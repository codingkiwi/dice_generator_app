<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dice Generator</title>
    <style type="text/css">
    
    .d6_dice{
        margin: 0;
    	padding: 0;
    }
    
    .d6_active{
        width:64px;
    	height:64px;
    	text-decoration:none;
    	list-style-type:none;
    	float: left;
    	background-image:url(images/d6_flat_faces_small.png);   
    }
    .d6_inactive{
        width:64px;
    	height:64px;
    	text-decoration:none;
    	list-style-type:none;
    	float: left;
    	background-image:url(images/d6_flat_faces_grey_small.png);   
    }
    .d6_1{background-position: 0 0;}
    .d6_2{background-position: 130px 0;}
    .d6_3{background-position: 65px 0;}
    .d6_4{background-position: 0 65px;}
    .d6_5{background-position: 130px 65px;}
    .d6_6{background-position: 65px 65px;}
    
    </style>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    
</head>

<body>

    <select id="numberOfDice">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25</option>
        <option value="26">26</option>
        <option value="27">27</option>
        <option value="28">28</option>
        <option value="29">29</option>
        <option value="30">30</option>
        <option value="31">31</option>
        <option value="12">32</option>
        <option value="33">33</option>
        <option value="34">34</option>
        <option value="35">35</option>
        <option value="36">36</option>
        <option value="37">37</option>
        <option value="38">38</option>
        <option value="39">39</option>
        <option value="40">40</option>
        <option value="41">41</option>
        <option value="44">44</option>
        <option value="43">43</option>
        <option value="44">44</option>
        <option value="45">45</option>
        <option value="46">46</option>
        <option value="47">47</option>
        <option value="48">48</option>
        <option value="49">49</option>
        <option value="50">50</option>
    </select>
    
    <select id="diceType">
        <option value="6">D6</option>
        <option value="3">D3</option>
    </select>
    
    <button id="rollButton" type="button">Roll Dice</button>
    
    <!-- Div to output dice total dynamically -->
    <div id="diceTotal"></div>
    
    <!-- Div to output dice tally dynamically -->
    <ol id="diceTally"></ol>
    
    <!-- Div to output dice images dynamically -->
    <div id="mainContent">
        <ul class="d6_dice" id="dicelist"></ul>
    </div>
    
    <script> 
        
        //Randomly generates numbers for the dice and returns an array of their values
        function rollDice(numberOfDice, diceType){
            var diceNumber = [];
            var diceTally = [];
            
            for(var m = 0; m <= 6; m++){
                diceTally[m] = 0;
            }
            
            if(diceType == 3){
                for (var i = 0; i < numberOfDice; i++){
                    diceNumber[i] = Math.round(Math.floor(Math.random() * 3)) + 1; 
                    if (diceNumber[i] == 1){
                        diceTally[1] += 1;
                    }
                    else if (diceNumber[i] == 2){
                        diceTally[2] += 1;
                    }
                    else if (diceNumber[i] == 3){
                        diceTally[3] += 1;
                    }
                }
            }
            else{
                for (var j = 0; j < numberOfDice; j++){
                    diceNumber[j] = Math.round(Math.floor(Math.random() * 6)) + 1; 
                    if (diceNumber[j] == 1){
                        diceTally[1] += 1;
                    }
                    else if (diceNumber[j] == 2){
                        diceTally[2] += 1;
                    }
                    else if (diceNumber[j] == 3){
                        diceTally[3] += 1;
                    }
                    else if (diceNumber[j] == 4){
                        diceTally[4] += 1;
                    }
                    else if (diceNumber[j] == 5){
                        diceTally[5] += 1;
                    }
                    else if (diceNumber[j] == 6){
                        diceTally[6] += 1;
                    }    
                }
            }
            //sort dice numerically highest to lowest
            diceNumber.sort(function(a,b){return b-a});
            return [diceNumber, diceTally];
        }
        
        // removes the current dice and calls rollDice, then adds the new dice to the page
        function roll(numberOfDice, diceType) {
            //remove the previous dice list
            $("#dicelist").empty();
            $("#diceTotal").empty();
            $("#diceTally").empty();
            
            //re-roll and re-insert new dice
            var diceData = rollDice(numberOfDice, diceType);
            var diceTotal = 0;
            
            //print HTML for new dice list
            for(var i = 0; i < numberOfDice; i++){
                $("#dicelist").append("<li class=\"dice" + i + " d6_active d6_" + diceData[0][i] + "\"><a href=\"#6\"></a></li>");
                diceTotal = diceTotal + diceData[0][i];
            }
    
            //print HTML for dice total score
            $("#diceTotal").append("<h2>Total: " + diceTotal + "</h2>");
            
            //print HTML for dice tallies
            $("#diceTally").append("<ol>");
            for(var l = 1; l <= diceType; l++){
                $("#diceTally").append("<li>" + diceData[1][l] + "</li>");
            }
            $("#diceTally").append("</ol>"); 
            
            return false;
        }
        
        // initialization function
        function pageInit() {
            // Hook up the roll dice function to be triggered when a user clicks in the dice div area
            $("#rollButton").click(function(){
                var numberOfDice = $("#numberOfDice").val();
                var diceType = $("#diceType").val();
                roll(numberOfDice, diceType);
            });
            
            $(document).on('click', '#dicelist li', function(){
                $(this).addClass("d6_inactive").removeClass("d6_active");
            });
        }
        pageInit();

    </script>

</body>
</html>
